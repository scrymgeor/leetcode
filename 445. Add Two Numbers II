/**
 * Definition for singly-linked list.
 * struct ListNode {
 *     int val;
 *     struct ListNode *next;
 * };
 */
struct ListNode* addTwoNumbers(struct ListNode* l1, struct ListNode* l2) {
    struct ListNode* result=NULL;
    struct ListNode *prev,*curr,*post;
    prev=NULL;
    curr=l1;
    while(curr!=NULL){
        post=curr->next;
        curr->next=prev;
        prev=curr;
        curr=post;
    }l1=prev;

    prev=NULL;
    curr=l2;
    while(curr!=NULL){
        post=curr->next;
        curr->next=prev;
        prev=curr;
        curr=post;
    }l2=prev;

    int carry=0;
    while(l1!=NULL||l2!=NULL||carry!=0){
        long long sum=carry;
        if(l1!=NULL){
            sum+=l1->val;
            l1=l1->next;
        }
        if(l2!=NULL){
            sum+=l2->val;
            l2=l2->next;
        }
        carry=sum/10;
        struct ListNode* temp=(struct ListNode*)malloc(sizeof(struct ListNode));
        temp->next=NULL;
        if(sum==0 && carry==0 && l2==NULL && l1==NULL){
            temp->val=0;
            result=temp;
            return result;
        }
        
        temp->val=sum%10;
        if(result==NULL){
            result=temp;
        }
        else{
            temp->next=result;
            result=temp;
        }
        
    }

    return result;
}
